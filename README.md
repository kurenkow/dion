<!--
Автор: Андрей Куренков | email: kurenkow@mail.ru | tg: @kurenkow | github: kurenkow/dion
-->
### Результаты выполнения [тестового задания](https://github.com/kurenkow/dion/blob/main/Тестовое_задание_Технический_писатель.pdf)

---

##### 1. Вёрстка текста
---

# Обеспечение политики безопасности при контейнеризации микросервисов

> [!NOTE]
Чтобы обеспечить безопасное взаимодействие бэкенд-сервисов в качестве Policy Decision Point (PDP) используется компонент Open Policy Agent (OPA) `acr-pdp`, который необходимо включать в Helm-чарт в виде sidecar-контейнера вместе с основным микросервисом.
Для этого необходимо отредактировать соответствующие конфигурационные файлы: `Chart.yaml`, `values.yaml`, `ConfigMap.yaml`, `Service.yaml`, а также файл с описанием формируемого пода.

## Декларирование зависимостей
Для настройки зависимостей в файл `Chart.yaml` должены быть внесены следующие данные:
```yml
dependencies:
  - name: acr-pdp
    version: ^1.0.0-0
    repository: "@dbp"
```
## Декларирование каталога с политиками
Для настройки ОРА параметр `policiesFilePath` в файле `values.yaml` должен содержать путь к файлам с политиками (обычно файлы с расширениями *rego* или *json*):
```yml
pdpSidecar:
  policiesFilePath: "files/policies/**"
```
> [!TIP]
Значения параметров, используемые по умолчанию (порт сервиса, параметры контейнера, таймауты и др.), также при необходимости могут быть переопределены в файле `values.yaml`.
## Декларирование файла политик
Для импорта требуемых политик файл `ConfigMap.yaml` должен содержать следующие данные:
```yml
{{- include "acr-pdp.configmap" . -}}
```
> [!TIP]
В результате обработки файла `ConfigMap.yaml` менеджером пакетов Helm в файл `acr-pdp.configmap` будут импортированы политики OPA из каталога, указанного в файле `values.yaml`.
## Декларирование портов
Для настройки портов файл `Service.yaml` в разделе `ports` должен содержать следующие данные:
```yml
{{- include "acr-pdp.sidecar.port" . | nindent 4}}
```
## Декларирование контейнеров
Для настройки подов с контейнерами соответствующие конфигурационные файлы в каталоге `Deployment/StatefulSet/` должны содержать данные, представленные ниже.

В разделе `metadata`:
```yml
spec:
  template:
    metadata:
      annotations:
        {{- include "acr-pdp.sidecar.label-logging" . | nindent 8 }}
```
В разделе `containers`:
```yml
{{- acr-pdp.sidecar.container" . | nindent 8 }}
```

---

##### 2. Вёрстка таблиц
---

Таблица 1 – Пример использования языка разметки HTML

<table>
	<tbody>
		<tr>
			<td colspan="2" rowspan="2">Наименование</td>
			<td colspan="2">Общая колонка 1</td>
			<td colspan="2">Общая колонка 2</td>
			<td rowspan="2">Колонка 3</td>
		</tr>
		<tr>
			<td>Колонка 1-1</td>
			<td>Колонка 1-2</td>
			<td>Колонка 2-1</td>
			<td>Колонка 2-2</td>
		</tr>
		<tr>
			<td colspan="2">Позиция 1</td>
			<td rowspan="2">5</td>
			<td rowspan="2">5</td>
			<td rowspan="2">10</td>
			<td rowspan="2">5</td>
			<td rowspan="2">25</td>
		</tr>
		<tr>
			<td>NOTE</td>
			<td>Важное примечание</td>
		</tr>
		<tr>
			<td colspan="2">Позиция 2</td>
			<td>5</td>
			<td>5</td>
			<td>10</td>
			<td>5</td>
			<td>25</td>
		</tr>
		<tr>
			<td colspan="2">Позиция 3</td>
			<td>0</td>
			<td>5</td>
			<td>10</td>
			<td>5</td>
			<td>20</td>
		</tr>
		<tr>
			<td colspan="2">Итого:</td>
			<td colspan="2">25</td>
			<td colspan="2">45</td>
			<td>70</td>
		</tr>
	</tbody>
</table>

Таблица 2 – Пример использования языка разметки Markdown

| № п/п | Имя сервера (hostname) | IP-адрес сервера | Назначение сервера |
|:-----:|:-----------------------|:-----------------|:-------------------|
| 1 | back-07 | 10.9.153.217 | Сервер установки, используется для развертывания приложений через Ansible, на нем же расположен репозиторий с пакетами СПО |
| 2 | back-08 или dev9&#8209;postgresql.gisdemo.xy | 10.9.153.218 | Сервер с базами данных PostgreSQL |
| 3 | back-11 или dev9&#8209;swift.gisdemo.xy | 10.9.153.221 | Сервер с файловым хранилищем S3 |
| 4 | back-12 или dev9&#8209;rabbitmq.gisdemo.xy | 10.9.153.222 | Сервер очередей RabbitMQ |
| 5 | back-20 или dev9&#8209;services1.gisdemo.xy | 10.9.153.230 | Сервер с сервисами СПО |

---

##### 3. Редактура
---

> [!IMPORTANT]
>*Перефразируйте, используя технический стиль письма:*

>i. Для получения детализации по….

**Чтобы детализировать...**

>ii. Для создания заметки….

**Чтобы создать заметку...**

>iii. При нажатии кнопки XXX в таблице отображаются….

**Нажатие кнопки ХХХ приводит к отображению в таблице...**

>iv. Для получения подробной информации см….

**Подробная инфомация доступна...**

>v. …реализуется при подключении опции XXX.

**... для реализации необходимо подключение опции ХХХ.**

>vi. При включении настроечных параметров механизм XXX не используется….

**Механизм ХХХ не используется в случае изменения настроек, заданных по умолчанию.**

>vii. Перед отключением всех продуктов происходит закрытие абонента в целях исключения возможности использования продуктов во время процесса по их отключению.

**Чтобы исключить возможность использования продуктов, находящихся в процессе отключения, производится предварительное автоматическое закрытие абонента[^1].**

>viii. Серверная часть XXX устанавливается запуском командного файла XXX на схеме данных продукта XXX.

**Установка серверной части ХХХ производится путём запуска командного файла, который указан на схеме данных продукта XXX.**

>ix. в начале выполнения производится проверка значения переменной.

**Значение переменной проверяется в начале выполнения процедуры.**

---
##### 4. Корректура
---

>[!IMPORTANT]
>*Исправьте грамматические ошибки в предложениях, если это требуется:*

i. Заимствованное слово «веб» в составе сложных слов пишется через дефис, например: веб-страница, веб-сайт, веб-браузер, веб-интерфейс, веб-сервер, веб-сервис, веб-клиент и т. п.

ii. Допускается в составе устойчивых словосочетаний, например «горячая замена».

iii. Поиск в интернете.

iv. Поиск в глобальной сети Интернет.


 [^1]: Здесь рассматривается случай, когда словосочетание «закрытие абонента» является устойчивым выражением среди читателей данного текста, означающим по смыслу завершение сеанса работы пользователя и не предполагающим полное удаление учетной записи абонента из системы.
